{
  "taskIdCounter": 2,
  "tasks": [
    [
      "task_1",
      {
        "id": "task_1",
        "name": "Стратегия Продвижения (Анализ + Планирование)",
        "dagPlan": {
          "task_name": "Стратегия Продвижения (Анализ + Планирование)",
          "nodes": [
            {
              "id": "node1_write",
              "agent": "WriterAgent",
              "input": {
                "topic": "SuperProduct",
                "tone": "enthusiastic"
              },
              "dependsOn": []
            },
            {
              "id": "node2_guard",
              "agent": "GuardAgent",
              "input": {
                "check": "tone"
              },
              "dependsOn": [
                "node1_write"
              ]
            },
            {
              "id": "node1_analyze",
              "agent": "ProductAnalysisAgent",
              "input": {
                "topic": "SuperProduct Analysis"
              },
              "dependsOn": [
                "node2_guard"
              ]
            },
            {
              "id": "node2_strategy",
              "agent": "StrategyAgent",
              "input": {
                "topic": "Initial Strategy Design"
              },
              "dependsOn": [
                "node1_analyze"
              ]
            },
            {
              "id": "node3_human_review",
              "agent": "HumanGateAgent",
              "input": {
                "reason": "Awaiting strategy review and metrics input/update."
              },
              "dependsOn": [
                "node2_strategy"
              ]
            },
            {
              "id": "node4_review_strategy",
              "agent": "StrategyReviewAgent",
              "input": {
                "review_period": "5_days"
              },
              "dependsOn": [
                "node3_human_review"
              ]
            }
          ]
        },
        "status": "FAILED",
        "nodes": [
          "node1_write",
          "node2_guard",
          "node1_analyze",
          "node2_strategy",
          "node3_human_review",
          "node4_review_strategy",
          "retry_node2_guard_v1",
          "node1_write_v2",
          "node2_guard_v2",
          "retry_node2_guard_v2_v2",
          "node1_write_v3",
          "node2_guard_v3"
        ],
        "schedule": []
      }
    ]
  ],
  "nodes": [
    [
      "node1_write",
      {
        "id": "node1_write",
        "taskId": "task_1",
        "agent_type": "WriterAgent",
        "status": "SKIPPED_RETRY",
        "input_data": {
          "topic": "SuperProduct",
          "tone": "enthusiastic"
        },
        "dependsOn": [],
        "result_data": {
          "text": "MOCK: gemini-2.5-flash generated content for: Напиши статью в энтузиастичном тоне на тему «Super...",
          "meta": {
            "model": "gemini-2.5-flash",
            "tokens": 24.75,
            "prompt": "Напиши статью в энтузиастичном тоне на тему «SuperProduct»."
          },
          "nextAttempt": "node1_write_v2"
        },
        "cost": 0.000012375,
        "attempt": 1,
        "is_retry": false,
        "is_temporary": false
      }
    ],
    [
      "node2_guard",
      {
        "id": "node2_guard",
        "taskId": "task_1",
        "agent_type": "GuardAgent",
        "status": "SKIPPED_RETRY",
        "input_data": {
          "check": "tone"
        },
        "dependsOn": [
          "node1_write"
        ],
        "result_data": {
          "nextGuard": "node2_guard_v2",
          "nextAttempt": "node1_write_v2"
        },
        "cost": 0,
        "attempt": 1,
        "is_retry": false,
        "is_temporary": false
      }
    ],
    [
      "node1_analyze",
      {
        "id": "node1_analyze",
        "taskId": "task_1",
        "agent_type": "ProductAnalysisAgent",
        "status": "PLANNED",
        "input_data": {
          "topic": "SuperProduct Analysis"
        },
        "dependsOn": [
          "node2_guard_v3"
        ],
        "result_data": null,
        "cost": 0,
        "attempt": 1,
        "is_retry": false,
        "is_temporary": false
      }
    ],
    [
      "node2_strategy",
      {
        "id": "node2_strategy",
        "taskId": "task_1",
        "agent_type": "StrategyAgent",
        "status": "PLANNED",
        "input_data": {
          "topic": "Initial Strategy Design"
        },
        "dependsOn": [
          "node1_analyze"
        ],
        "result_data": null,
        "cost": 0,
        "attempt": 1,
        "is_retry": false,
        "is_temporary": false
      }
    ],
    [
      "node3_human_review",
      {
        "id": "node3_human_review",
        "taskId": "task_1",
        "agent_type": "HumanGateAgent",
        "status": "PLANNED",
        "input_data": {
          "reason": "Awaiting strategy review and metrics input/update."
        },
        "dependsOn": [
          "node2_strategy"
        ],
        "result_data": null,
        "cost": 0,
        "attempt": 1,
        "is_retry": false,
        "is_temporary": false
      }
    ],
    [
      "node4_review_strategy",
      {
        "id": "node4_review_strategy",
        "taskId": "task_1",
        "agent_type": "StrategyReviewAgent",
        "status": "PLANNED",
        "input_data": {
          "review_period": "5_days"
        },
        "dependsOn": [
          "node3_human_review"
        ],
        "result_data": null,
        "cost": 0,
        "attempt": 1,
        "is_retry": false,
        "is_temporary": false
      }
    ],
    [
      "retry_node2_guard_v1",
      {
        "id": "retry_node2_guard_v1",
        "taskId": "task_1",
        "agent_type": "RetryAgent",
        "status": "SUCCESS",
        "input_data": {
          "failedGuardNodeId": "node2_guard",
          "originalNodeId": "node1_write"
        },
        "dependsOn": [
          "node2_guard_v3"
        ],
        "result_data": {
          "correctiveNodeId": "node1_write_v2",
          "retryTarget": "node1_write",
          "internalPrompt": "Предыдущая попытка сгенерировать контент завершилась ошибкой по причине: FORCED_FAIL: Failure triggered by configuration.. Контент был проверен на соответствие тону: \"enthusiastic\". Исходный промпт: Напиши статью в энтузиастичном тоне на тему «SuperProduct».. Сформулируй НОВЫЙ, исправленный промпт, который явно **усилит** требуемый тон и **избежит** предыдущей ошибки. Верни только текст обновленного промпта без дополнительных пояснений. Промпт должен быть коротким."
        },
        "cost": 0,
        "attempt": 2,
        "is_retry": true,
        "is_temporary": false
      }
    ],
    [
      "node1_write_v2",
      {
        "id": "node1_write_v2",
        "taskId": "task_1",
        "agent_type": "WriterAgent",
        "status": "SKIPPED_RETRY",
        "input_data": {
          "topic": "SuperProduct",
          "tone": "enthusiastic",
          "promptOverride": "MOCK: gemini-2.5-flash generated content for: Предыдущая попытка сгенерировать контент завершила...",
          "retryCount": 1
        },
        "dependsOn": [],
        "result_data": {
          "text": "MOCK: gemini-2.5-flash generated content for: MOCK: gemini-2.5-flash generated content for: Пред...",
          "meta": {
            "model": "gemini-2.5-flash",
            "tokens": 24.75,
            "prompt": "MOCK: gemini-2.5-flash generated content for: Предыдущая попытка сгенерировать контент завершила..."
          },
          "nextAttempt": "node1_write_v3"
        },
        "cost": 0.000012375,
        "attempt": 2,
        "is_retry": false,
        "is_temporary": false
      }
    ],
    [
      "node2_guard_v2",
      {
        "id": "node2_guard_v2",
        "taskId": "task_1",
        "agent_type": "GuardAgent",
        "status": "SKIPPED_RETRY",
        "input_data": {
          "check": "tone"
        },
        "dependsOn": [
          "node1_write_v2"
        ],
        "result_data": {
          "nextGuard": "node2_guard_v3",
          "nextAttempt": "node1_write_v3"
        },
        "cost": 0,
        "attempt": 2,
        "is_retry": false,
        "is_temporary": false
      }
    ],
    [
      "retry_node2_guard_v2_v2",
      {
        "id": "retry_node2_guard_v2_v2",
        "taskId": "task_1",
        "agent_type": "RetryAgent",
        "status": "SUCCESS",
        "input_data": {
          "failedGuardNodeId": "node2_guard_v2",
          "originalNodeId": "node1_write_v2"
        },
        "dependsOn": [
          "node2_guard_v3"
        ],
        "result_data": {
          "correctiveNodeId": "node1_write_v3",
          "retryTarget": "node1_write_v2",
          "internalPrompt": "Предыдущая попытка сгенерировать контент завершилась ошибкой по причине: FORCED_FAIL: Failure triggered by configuration.. Контент был проверен на соответствие тону: \"enthusiastic\". Исходный промпт: MOCK: gemini-2.5-flash generated content for: Предыдущая попытка сгенерировать контент завершила.... Сформулируй НОВЫЙ, исправленный промпт, который явно **усилит** требуемый тон и **избежит** предыдущей ошибки. Верни только текст обновленного промпта без дополнительных пояснений. Промпт должен быть коротким."
        },
        "cost": 0,
        "attempt": 3,
        "is_retry": true,
        "is_temporary": false
      }
    ],
    [
      "node1_write_v3",
      {
        "id": "node1_write_v3",
        "taskId": "task_1",
        "agent_type": "WriterAgent",
        "status": "SUCCESS",
        "input_data": {
          "topic": "SuperProduct",
          "tone": "enthusiastic",
          "promptOverride": "MOCK: gemini-2.5-flash generated content for: Предыдущая попытка сгенерировать контент завершила...",
          "retryCount": 2
        },
        "dependsOn": [],
        "result_data": {
          "text": "MOCK: gemini-2.5-flash generated content for: MOCK: gemini-2.5-flash generated content for: Пред...",
          "meta": {
            "model": "gemini-2.5-flash",
            "tokens": 24.75,
            "prompt": "MOCK: gemini-2.5-flash generated content for: Предыдущая попытка сгенерировать контент завершила..."
          }
        },
        "cost": 0.000012375,
        "attempt": 3,
        "is_retry": false,
        "is_temporary": false
      }
    ],
    [
      "node2_guard_v3",
      {
        "id": "node2_guard_v3",
        "taskId": "task_1",
        "agent_type": "GuardAgent",
        "status": "FAILED",
        "input_data": {
          "check": "tone"
        },
        "dependsOn": [
          "node1_write_v3"
        ],
        "result_data": {
          "reason": "FORCED_FAIL: Failure triggered by configuration."
        },
        "cost": 0,
        "attempt": 3,
        "is_retry": false,
        "is_temporary": false
      }
    ]
  ]
}